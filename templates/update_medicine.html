{% extends 'base.html' %}
{% block content %}
  <h2>Update Medicine: {{med.name}}</h2>
  <form method="post">
    {{ csrf_token() }}
    <div class="mb-3">
      <label class="form-label">Name</label>
      <input class="form-control" name="name" value="{{med.name}}" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Brand</label>
      <input class="form-control" name="brand" value="{{med.brand or ''}}">
    </div>
    <div class="mb-3">
      <label class="form-label">Category</label>
      <input class="form-control" name="category" value="{{med.category or ''}}">
    </div>
    <div class="mb-3">
      <label class="form-label">Price</label>
      <input class="form-control" name="price" type="number" step="0.01" placeholder="â‚µ0.00" value="{{'%.2f'|format(med.price)}}" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Quantity</label>
      <input class="form-control" name="quantity" type="number" value="{{med.quantity}}" required>
    </div>
    <div class="mb-3">
      <label class="form-label">Expiry Date (optional)</label>
      <input class="form-control" name="expiry_date" type="date" value="{{med.expiry_date}}">
    </div>
    <div class="mb-3">
      <label class="form-label">Description (optional)</label>
      <textarea class="form-control" name="description" rows="3">{{med.description or ''}}</textarea>
    </div>
    <button class="btn btn-primary">Save</button>
  </form>

  {% if session.get('is_admin') %}
  <hr>
  <form method="post" action="/medicines/delete/{{med.id}}" onsubmit="return confirm('Delete this medicine?');">
    {{ csrf_token() }}
    <button class="btn btn-danger">Delete Medicine</button>
  </form>
  {% endif %}
{% endblock %}
